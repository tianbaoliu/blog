(window.webpackJsonp=window.webpackJsonp||[]).push([[121],{638:function(a,t,s){"use strict";s.r(t);var n=s(2),e=Object(n.a)({},(function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h2",{attrs:{id:"部署生产"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#部署生产"}},[a._v("#")]),a._v(" 部署生产")]),a._v(" "),s("h4",{attrs:{id:"_1、服务器安装node"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、服务器安装node"}},[a._v("#")]),a._v(" 1、服务器安装node")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("yum install -y nodejs\n")])])]),s("p",[a._v("建议安装8.0版本以上，低于此版本的可以通过以下命令升级node")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("1、清除缓存信息\n   sudo npm cache clean -f\n\n2、下载node安装包\n   sudo npm install -g n\n\n3、升级到nodejs最新稳定版本\n   sudo n stable\n\n    n 常用的命令有：\n    n 会列出所有安装的版本供你切换\n    n latest 安装最新版本\n    n stable 安装最新稳定版\n    n lts 安装最新长期支持版本\n    n rm [版本号] 删除某一版本\n    n -h 帮助命令\n    n [版本号] 安装指定版本node\n\n4、查看当前版本，如果版本无变化，重新进入服务器\n   node -v\n")])])]),s("h4",{attrs:{id:"_2、项目上传"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2、项目上传"}},[a._v("#")]),a._v(" 2、项目上传")]),a._v(" "),s("ul",[s("li",[s("p",[a._v("将项目中的.nuxt, static, package.json,nuxt.config.js这个4个文件打包上传到服务器")])]),a._v(" "),s("li",[s("p",[a._v("安装依赖")])])]),a._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[a._v("npm install "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),a._v("production\n")])])]),s("ul",[s("li",[a._v("打包")])]),a._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[a._v("npm run "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("build")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("这步操作可以不再服务器上进行，执行后会在"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("nuxt目录下产生dist文件夹"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n")])])]),s("ul",[s("li",[a._v("启动项目")])]),a._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[a._v("npm run start\n")])])]),s("p",[a._v("到此，在服务器上已经将nuxt项目启动成功了，但是存在两个问题，第一：如何外部浏览器访问，第二：一旦关闭服务器，项目就会终止，继续往下看～")]),a._v(" "),s("h4",{attrs:{id:"_3、外部如何访问"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3、外部如何访问"}},[a._v("#")]),a._v(" 3、外部如何访问")]),a._v(" "),s("ul",[s("li",[a._v("我以阿里云服务器为例，假设nuxt项目端口为8080，需要在阿里云服务器配置端口为8080，可允许外部访问的安全组，在假设服务器公网IP为 39.202.3.687，那么直接访问http://39.202.3.687:8080即可访问此nuxt项目")]),a._v(" "),s("li",[a._v("在高级一点，nginx代理，访问域名，首先需要做DNS域名解析，监听端口，简单nginx配置如下：")])]),a._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[a._v("server "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    listen "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("8080")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    server_name www"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("test"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("cn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n    location "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        proxy_pass http"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("127.0")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v(".0")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v(".1")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("8080")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v(" \n")])])]),s("h4",{attrs:{id:"_4、pm2管理进程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4、pm2管理进程"}},[a._v("#")]),a._v(" 4、pm2管理进程")]),a._v(" "),s("ul",[s("li",[s("p",[a._v("pm2是一个进程管理工具,可以用它来管理你的node进程，并查看node进程的状态，当然也支持性能监控，进程守护，负载均衡等功能，主要是可以后台挂载运行项目")])]),a._v(" "),s("li",[s("p",[a._v("安装pm2")])])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("npm install pm2 -g\n")])])]),s("ul",[s("li",[a._v("启动项目")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v('pm2 start npm --name "nuxt" -- run start\n\n--name "nuxt"是启动的服务名称，自定义\n')])])]),s("ul",[s("li",[a._v("pm2常用命令")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("pm2 list  // 查看任务列表\npm2 stop app_name|app_id  // 停止指定name或者id的任务\npm2 stop all  // 停止所有任务\npm2 delete app_name|app_id  // 删除指定name或者id的任务\npm2 delete all  // 删除所有任务\npm2 logs // 查看日志\npm2 kill  // 杀死pm2进程\n")])])])])}),[],!1,null,null,null);t.default=e.exports}}]);